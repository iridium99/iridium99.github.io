<!DOCTYPE html>
<html>
<head>
    <title>LDC RS Legends - Official Website</title>
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon.png">
    <style>
        :root {
            --primary: #232375;
            --background: #1a1a1a;
            --card-bg: #252525;
            --text: #ffffff;
        }
        
        /* Username glows */
        .username-gradient {
            font-weight: bold;
            background: linear-gradient(90deg, var(--color1), var(--color2));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            filter: drop-shadow(0 0 8px rgba(var(--glow-r), var(--glow-g), var(--glow-b), 0.6)) 
                    drop-shadow(0 0 4px rgba(var(--glow-r), var(--glow-g), var(--glow-b), 0.4));
        }
        
        body {
            font-family: 'Arial', sans-serif;
            background: var(--background);
            color: var(--text);
            margin: 0;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        /* UIverse button */
        .tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
            border-bottom: 2px solid var(--primary);
            padding-bottom: 10px;
        }
        
        .tab {
            position: relative;
            padding: 10px 20px;
            border-radius: 7px;
            border: 1px solid rgb(61, 106, 255);
            font-size: 14px;
            text-transform: uppercase;
            font-weight: 600;
            letter-spacing: 2px;
            background: transparent;
            color: #fff;
            overflow: hidden;
            box-shadow: 0 0 0 0 transparent;
            -webkit-transition: all 0.2s ease-in;
            -moz-transition: all 0.2s ease-in;
            transition: all 0.2s ease-in;
            cursor: pointer;
            margin: 0 5px;
        }
        
        .tab.active {
            background: rgb(61, 106, 255);
        }
        
        .tab:hover {
            background: rgb(61, 106, 255);
            box-shadow: 0 0 30px 5px rgba(0, 142, 236, 0.815);
            -webkit-transition: all 0.2s ease-out;
            -moz-transition: all 0.2s ease-out;
            transition: all 0.2s ease-out;
        }
        
        .tab:hover::before {
            -webkit-animation: sh02 0.5s 0s linear;
            -moz-animation: sh02 0.5s 0s linear;
            animation: sh02 0.5s 0s linear;
        }
        
        .tab::before {
            content: '';
            display: block;
            width: 0px;
            height: 86%;
            position: absolute;
            top: 7%;
            left: 0%;
            opacity: 0;
            background: #fff;
            box-shadow: 0 0 50px 30px #fff;
            -webkit-transform: skewX(-20deg);
            -moz-transform: skewX(-20deg);
            -ms-transform: skewX(-20deg);
            -o-transform: skewX(-20deg);
            transform: skewX(-20deg);
        }
        
        @keyframes sh02 {
            from {
                opacity: 0;
                left: 0%;
            }
            
            50% {
                opacity: 1;
            }
            
            to {
                opacity: 0;
                left: 100%;
            }
        }
        
        .tab:active {
            box-shadow: 0 0 0 0 transparent;
            -webkit-transition: box-shadow 0.2s ease-in;
            -moz-transition: box-shadow 0.2s ease-in;
            transition: box-shadow 0.2s ease-in;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .filters {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        select, input {
            padding: 10px;
            border: 2px solid var(--primary);
            border-radius: 8px;
            background: var(--card-bg);
            color: var(--text);
            font-size: 14px;
        }
        
        .range-filters {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .range-filter {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .range-filter label {
            font-size: 14px;
            color: #a0a0a0;
        }
        
        .range-filter input {
            width: 80px;
        }
        
        .players-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .player-card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 15px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }
        
        .player-card:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
        }
        
        .player-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .player-rating {
            background: var(--primary);
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 18px;
        }
        
        .player-name {
            font-size: 18px;
            font-weight: bold;
            margin: 0;
            flex-grow: 1;
            text-align: center;
        }
        
        .player-details {
            margin-top: 10px;
        }
        
        .player-detail {
            display: flex;
            justify-content: space-between;
            margin: 5px 0;
        }
        
        .detail-label {
            color: #a0a0a0;
        }
        
        .search-box {
            padding: 10px;
            width: 250px;
            border: 2px solid var(--primary);
            border-radius: 8px;
            background: var(--card-bg);
            color: var(--text);
        }
        
        .player-position {
            font-size: 12px;
            font-weight: bold;
        }
        
        .player-nation {
            font-size: 12px;
            font-weight: bold;
        }

        .player-image {
            width: 100%;
            border-radius: 12px;
            margin-bottom: 10px;
        }
        
        .help-content {
            max-width: 800px;
            margin: 0 auto;
            background: var(--card-bg);
            padding: 20px;
            border-radius: 12px;
        }
        
        .help-section {
            margin-bottom: 30px;
        }
        
        .help-section h3 {
            color: var(--primary);
            border-bottom: 2px solid var(--primary);
            padding-bottom: 8px;
        }
        
        .command-list {
            list-style-type: none;
            padding: 0;
        }
        
        .command-list li {
            background: rgba(88, 101, 242, 0.1);
            margin-bottom: 10px;
            padding: 12px;
            border-radius: 8px;
            border-left: 4px solid var(--primary);
        }
        
        .command-name {
            font-weight: bold;
            color: var(--primary);
        }
        
        .feature-list {
            list-style-type: none;
            padding: 0;
        }
        
        .feature-list li {
            margin-bottom: 15px;
            padding-left: 20px;
            position: relative;
        }
        
        .feature-list li:before {
            content: "✓";
            color: var(--primary);
            position: absolute;
            left: 0;
            font-weight: bold;
        }
        
        /* whats new */
        .updates-content {
            max-width: 1000px;
            margin: 0 auto;
        }
        
        .update-card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 4px solid var(--primary);
        }
        
        .update-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .update-title {
            font-size: 20px;
            color: var(--primary);
            margin: 0;
        }
        
        .update-date {
            color: #a0a0a0;
            font-size: 14px;
        }
        
        .update-badge {
            background: #ff6b6b;
            color: white;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            margin-left: 10px;
        }
        
        .new-cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin: 15px 0;
        }
        
        .new-card {
            background: rgba(88, 101, 242, 0.1);
            border-radius: 8px;
            padding: 10px;
            text-align: center;
            transition: all 0.3s ease;
        }
        
        .new-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .card-image {
            width: 100%;
            border-radius: 8px;
            margin-bottom: 8px;
        }
        
        .card-name {
            font-weight: bold;
            margin: 5px 0;
        }
        
        .card-rating {
            color: var(--primary);
            font-weight: bold;
        }
        
        .badge-admin {
            display: inline-block;
            background: rgba(0, 0, 0, 0.2);
            padding: 2px 6px;
            border-radius: 10px;
            margin-left: 8px;
            font-size: 11px;
            font-weight: bold;
            background: linear-gradient(
                270deg,
                #ef4444,
                #f97316,
                #eab308,
                #dc2626,
                #ef4444
            );
            background-size: 400% 400%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: badgeGradientMove 7s ease infinite;
            filter: drop-shadow(0 0 8px rgba(239, 68, 68, 0.4));
        }
        
        .badge-plus {
            display: inline-block;
            background: rgba(0, 0, 0, 0.2);
            padding: 2px 6px;
            border-radius: 10px;
            margin-left: 8px;
            font-size: 11px;
            font-weight: bold;
            background: linear-gradient(
                270deg,
                #60a5fa,
                #818cf8,
                #67e8f9,
                #60a5fa,
                #818cf8
            );
            background-size: 400% 400%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: badgeGradientMove 7s ease infinite;
            filter: drop-shadow(0 0 8px rgba(96, 165, 250, 0.4));
        }
        
        .badge-vip {
            display: inline-block;
            background: rgba(0, 0, 0, 0.2);
            padding: 2px 6px;
            border-radius: 10px;
            margin-left: 8px;
            font-size: 11px;
            font-weight: bold;
            background: linear-gradient(
                270deg,
                #a855f7,
                #7c3aed,
                #d946ef,
                #a855f7,
                #7c3aed
            );
            background-size: 400% 400%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: badgeGradientMove 7s ease infinite;
            filter: drop-shadow(0 0 8px rgba(168, 85, 247, 0.4));
        }
        
        .username-gradient-animated {
            font-weight: bold;
            background-size: 400% 400%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: usernameGradientMove 7s ease infinite;
        }
        
        @keyframes badgeGradientMove {
            0%   { background-position: 0% 50%; }
            50%  { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        @keyframes usernameGradientMove {
            0%   { background-position: 0% 50%; }
            50%  { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        @keyframes adminGradientMove {
            0%   { background-position: 0% 50%; }
            50%  { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Welcome to LDC RS Legends</h1>
        <p>View all available players, commands, global stats, leaderboards</p>
    </div>

    <div class="tabs">
        <div class="tab" data-tab="whats-new">What's New</div>
        <div class="tab active" data-tab="players">Players</div>
        <div class="tab" data-tab="player-stats">Player Stats Leaderboard</div>
        <div class="tab" data-tab="user-stats">User Stats Leaderboard</div>
        <div class="tab" data-tab="league-standings">League Standings</div>
        <div class="tab" data-tab="help">Help & Commands</div>
    </div>

    <div class="tab-content" id="whats-new-tab">
        <div class="updates-content">
            <div class="update-card">
                <div class="update-header">
                    <h2 class="update-title">Base Ratings and Cards Reveal</h2>
                    <span class="update-badge">NEW</span>
                </div>
                <img src="whatsnew/whatsnew1.png" alt="Base Ratings and Cards Reveal" style="width: 100%; border-radius: 8px; margin-bottom: 15px;">
                <p style="color: #e0e0e0; line-height: 1.6;">this wouldn't be possible without the raters. thank you all for registering, the bot WILL be out soon :) - 19/01/2026</p>
            </div>
        </div>
    </div>

    <div class="tab-content active" id="players-tab">
        <div class="filters">
            <select id="sort-select">
                <option value="rating-desc">Rating: High to Low</option>
                <option value="rating-asc">Rating: Low to High</option>
                <option value="name-asc">Name: A to Z</option>
                <option value="name-desc">Name: Z to A</option>
                <option value="price-desc">Price: High to Low</option>
                <option value="price-asc">Price: Low to High</option>
            </select>
            
            <select id="position-filter">
                <!-- General categories first -->
                <option value="all">All Positions</option>
                <option value="GK">GK</option>
                <option value="DEF">DEF</option>
                <option value="MID">MID</option>
                <option value="ATT">ATT</option>

                <!-- Specific positions after -->
                <option value="CB">CB</option>
                <option value="CDM">CDM</option>
                <option value="CM">CM</option>
                <option value="CAM">CAM</option>
                <option value="RW">RW</option>
                <option value="LW">LW</option>
                <option value="ST">ST</option>
            </select>
            
            <select id="rating-filter">
                <option value="all">All Ratings</option>
                <option value="90+">90+ OVR</option>
                <option value="85-89">85-89 OVR</option>
                <option value="80-84">80-84 OVR</option>
                <option value="75-79">75-79 OVR</option>
                <option value="70-74">70-74 OVR</option>
                <option value="60-69">60-69 OVR</option>
                <option value="40-59">40-59 OVR</option>
            </select>

            <select id="trait-filter">
                <option value="all">All Traits</option>
                <option value="playmakerplus">Playmaker +</option>
                <option value="clinical finisherplus">Clinical Finisher +</option>
                <option value="shotstopperplus">Shot Stopper +</option>
                <option value="penalty specialistplus">Penalty Specialist +</option>
                <option value="aggressiveplus">Aggressive +</option>
                <option value="composedplus">Composed +</option>
                <option value="playmaker">Playmaker</option>
                <option value="clinical finisher">Clinical Finisher</option>
                <option value="shotstopper">Shot Stopper</option>
                <option value="penalty specialist">Penalty Specialist</option>
                <option value="aggressive">Aggressive</option>
                <option value="composed">Composed</option>
            </select>
            
            <input type="text" id="search-box" placeholder="Search players..." class="search-box">
        </div>

        <div class="range-filters">
            <div class="range-filter">
                <label for="min-price">Min Price:</label>
                <input type="number" id="min-price" placeholder="0" min="0">
            </div>
            <div class="range-filter">
                <label for="max-price">Max Price:</label>
                <input type="number" id="max-price" placeholder="Max">
            </div>
            <div class="range-filter">
                <label for="min-ovr">Min OVR:</label>
                <input type="number" id="min-ovr" placeholder="0" min="0" max="99">
            </div>
            <div class="range-filter">
                <label for="max-ovr">Max OVR:</label>
                <input type="number" id="max-ovr" placeholder="99" min="0" max="99">
            </div>
        </div>

        <div class="players-grid" id="players-container">
            <!-- Players will be loaded here -->
        </div>
    </div>

    <div class="tab-content" id="player-stats-tab">
        <div class="filters">
            <button id="load-player-stats-btn" style="padding:10px 20px;background:var(--primary);border:none;border-radius:8px;color:white;cursor:pointer;">Load Player Stats</button>
        </div>
        <div id="player-stats-container" style="max-width:1000px;margin:0 auto;"></div>
    </div>

    <div class="tab-content" id="user-stats-tab">
        <div class="filters">
            <button id="load-user-stats-btn" style="padding:10px 20px;background:var(--primary);border:none;border-radius:8px;color:white;cursor:pointer;">Load User Stats</button>
        </div>
        <div id="user-stats-container" style="max-width:1000px;margin:0 auto;"></div>
    </div>

    <div class="tab-content" id="league-standings-tab">
        <div class="filters">
            <button id="load-all-leagues-btn" style="padding:10px 20px;background:var(--primary);border:none;border-radius:8px;color:white;cursor:pointer;">Show All Leagues</button>
        </div>
        <div id="league-standings-container" style="max-width:1000px;margin:0 auto;"></div>
    </div>

    <div class="tab-content" id="help-tab">
        <div class="help-content">
            <div class="help-section">
                <h3>Website Features</h3>
                <ul class="feature-list">
                    <li><strong>Player Catalog:</strong> Browse all available players with detailed information including ratings, positions, and prices.</li>
                    <li><strong>Advanced Filtering:</strong> Filter players by position, rating range, and price range to find exactly what you're looking for.</li>
                    <li><strong>Search Functionality:</strong> Search for players by name.</li>
                    <li><strong>Sorting Options:</strong> Sort players by rating, name, or price in ascending or descending order.</li>
                    <li><strong>Responsive Design:</strong> The website works well on both desktop and mobile devices.</li>
                </ul>
            </div>
            
            <div class="help-section">
                <h3>Discord Commands</h3>
                <ul class="command-list">
                    <li><span class="command-name">/addplayer [name] [position]</span> - Add a player to your team</li>
                    <li><span class="command-name">/balance</span> - Check your current coin balance</li>
                    <li><span class="command-name">/buyplayer [name]</span> - Purchase a player from the market</li>
                    <li><span class="command-name">/changeteamname [name]</span> - Change your team's name</li>
                    <li><span class="command-name">/claim</span> - Claim a free player</li>
                    <li><span class="command-name">/collection</span> - View all of the players in your collection</li>
                    <li><span class="command-name">/daily</span> - Claim your daily rewards</li>
                    <li><span class="command-name">/duplicates</span> - View the duplicate cards in your collection</li>
                    <li><span class="command-name">/export</span> - Export user data <span class="badge-admin">Admin Only</span></li>
                    <li><span class="command-name">/form rating</span> - View detailed form analysis, Elo rating, and last 10 match performance <span class="badge-plus">Plus Only</span></li>
                    <li><span class="command-name">/friendly [user]</span> - Play against another user in a friendly match</li>
                    <li><span class="command-name">/generate_all_cards</span> - Generate all card images <span class="badge-admin">Admin Only</span></li>
                    <li><span class="command-name">/get_plus</span> - Purchase a Plus membership</li>
                    <li><span class="command-name">/givecoins [user] [amount]</span> - Give coins to a user <span class="badge-admin">Admin Only</span></li>
                    <li><span class="command-name">/leaderboards</span> - View leaderboards, stats, and rankings on iridium99.github.io/leagues/</li>
                    <li><span class="command-name">/league create</span> - Create a new league <span class="badge-admin">Admin Only</span></li>
                    <li><span class="command-name">/league create_test</span> - Create a test league <span class="badge-admin">Admin Only</span></li>
                    <li><span class="command-name">/market</span> - View the transfer market on iridium99.github.io</li>
                    <li><span class="command-name">/myteam</span> - View your current team lineup</li>
                    <li><span class="command-name">/myupgrades</span> - View your active upgrades</li>
                    <li><span class="command-name">/packs [type]</span> - Open different types of packs</li>
                    <li><span class="command-name">/ping</span> - Check the bot's response time</li>
                    <li><span class="command-name">/player stats [name]</span> - View detailed stats for a player</li>
                    <li><span class="command-name">/playerinfo [name]</span> - Get information about a specific player</li>
                    <li><span class="command-name">/preview_card [name]</span> - Preview a card design</li>
                    <li><span class="command-name">/quickselldupes</span> - Sell all of your duplicate cards</li>
                    <li><span class="command-name">/removeplayer [position]</span> - Remove a player from your team</li>
                    <li><span class="command-name">/resetteam</span> - Reset your team to default lineup</li>
                    <li><span class="command-name">/sellplayer [name]</span> - Sell a player from your collection</li>
                    <li><span class="command-name">/setlineup [formation]</span> - Change your team formation</li>
                    <li><span class="command-name">/setpieces</span> - Configure set piece takers</li>
                    <li><span class="command-name">/sim [user]</span> - Run advanced match simulation with team comparison, win probability, expected goals, and tactical analysis <span class="badge-plus">Plus Only</span></li>
                    <li><span class="command-name">/team analysis</span> - View tactical analysis with formation, line-by-line ratings (GK/DEF/MID/ATT), recent form (last 10 games), and upgrade recommendations <span class="badge-plus">Plus Only</span></li>
                    <li><span class="command-name">/upgrade [name]</span> - Upgrade a player card</li>
                    <li><span class="command-name">/vip add [user]</span> - Add VIP status to a user <span class="badge-admin">Admin Only</span></li>
                    <li><span class="command-name">/vip remove [user]</span> - Remove VIP status from a user <span class="badge-admin">Admin Only</span></li>
                    <li><span class="command-name">/vip color [color1] [color2]</span> - Set your VIP username gradient <span class="badge-plus">Plus Only</span></li>
                </ul>
            </div>
            
            <div class="help-section">
                <h3>Need More Help?</h3>
                <p>If you have any questions or need assistance, DM atrocity exhibition (the1n1ly)</p>
            </div>
        </div>
    </div>

    <script>
        const PRICE_TABLE = {
            60: [150, 60, [50, 90, 130, 180, 220]],
            61: [180, 72, [55, 100, 145, 200, 250]],
            62: [210, 84, [60, 110, 160, 220, 270]],
            63: [250, 100, [70, 125, 180, 250, 300]],
            64: [300, 120, [80, 150, 220, 300, 360]],
            65: [360, 144, [100, 190, 280, 380, 450]],
            66: [480, 192, [120, 240, 360, 480, 570]],
            67: [650, 260, [160, 320, 480, 640, 760]],
            68: [900, 360, [250, 500, 750, 1000, 1200]],
            69: [1400, 560, [400, 800, 1200, 1600, 1900]],
            70: [2200, 880, [650, 1300, 1950, 2600, 3100]],
            71: [3000, 1200, [900, 1800, 2700, 3600, 4300]],
            72: [4000, 1600, [1200, 2400, 3600, 4800, 5700]],
            73: [5500, 2200, [1700, 3400, 5100, 6800, 8100]],
            74: [7500, 3000, [2200, 4400, 6600, 8800, 10500]],
            75: [10000, 4000, [3000, 6000, 9000, 12000, 14500]],
            76: [15000, 6000, [4500, 9000, 13500, 18000, 21500]],
            77: [22000, 8800, [6500, 13000, 19500, 26000, 31000]],
            78: [32000, 12800, [9500, 19000, 28500, 38000, 45500]],
            79: [48000, 19200, [14000, 28000, 42000, 56000, 67000]],
            80: [70000, 28000, [20000, 40000, 60000, 80000, 95000]],
            81: [100000, 40000, [30000, 60000, 90000, 120000, 145000]],
            82: [150000, 60000, [45000, 90000, 135000, 180000, 220000]],
            83: [220000, 88000, [70000, 140000, 210000, 280000, 350000]],
            84: [320000, 128000, [100000, 200000, 300000, 400000, 500000]],
            85: [480000, 192000, [150000, 300000, 450000, 600000, 750000]],
            86: [750000, 300000, [230000, 460000, 690000, 920000, 1150000]],
            87: [1100000, 440000, [340000, 680000, 1020000, 1360000, 1700000]],
            88: [1600000, 640000, [500000, 1000000, 1500000, 2000000, 2500000]],
            89: [2300000, 920000, [750000, 1500000, 2250000, 3000000, 3750000]],
            90: [3300000, 1320000, [1100000, 2200000, 3300000, 4400000, 5500000]],
            91: [5000000, 2000000, [1700000, 3400000, 5100000, 6800000, 8500000]],
            92: [7500000, 3000000, [2500000, 5000000, 7500000, 10000000, 12500000]],
            93: [11000000, 4400000, [3800000, 7600000, 11400000, 15200000, 19000000]],
            94: [16000000, 6400000, [5500000, 11000000, 16500000, 22000000, 27500000]],
            95: [25000000, 10000000, [8500000, 17000000, 25500000, 34000000, 42500000]]
        };

        const allPlayers = [
            {id: 1, name: "Perkz", display_name: "Perkz", rating: 92, position: "CAM", nation: "Turkey", stats: {sho: 91, pas: 93, pos: 92, def: 87}, traits: ["playmakerplus", "clinical finisher"], card_type: "base"},
            {id: 2, name: "W-pi", display_name: "W-pi", rating: 92, position: "RW", nation: "Sierra Leone", stats: {sho: 92, pas: 92, pos: 90, def: 85}, traits: ["playmakerplus", "clinical finisherplus"], card_type: "base"},
            {id: 3, name: "alors", display_name: "alors", rating: 90, position: "ST", nation: "Algeria", stats: {sho: 91, pas: 91, pos: 89, def: 79}, traits: ["playmakerplus", "clinical finisherplus"], card_type: "base"},
            {id: 4, name: "tsukuyomi", display_name: "tsukuyomi.", rating: 91, position: "CDM", nation: "Netherlands", stats: {sho: 87, pas: 91, pos: 90, def: 90}, traits: ["playmakerplus", "composed"], card_type: "base"},
            {id: 5, name: "Lena", display_name: "Lena", rating: 90, position: "CDM", nation: "Turkey", stats: {sho: 87, pas: 91, pos: 88, def: 90}, traits: ["penalty specialist", "aggressive"], card_type: "base"},
            {id: 6, name: "Vaks", display_name: "Vaks", rating: 90, position: "CB", nation: "Poland", stats: {sho: 86, pas: 90, pos: 89, def: 89}, traits: ["playmakerplus", "composed"], card_type: "base"},
            {id: 7, name: "Pedri", display_name: "Pedri", rating: 89, position: "CM", nation: "Spain", stats: {sho: 86, pas: 90, pos: 90, def: 85}, traits: ["playmakerplus"], card_type: "base"},
            {id: 8, name: "cytro", display_name: "cytro", rating: 87, position: "LW", nation: "England", stats: {sho: 89, pas: 87, pos: 86, def: 78}, traits: ["playmakerplus"], card_type: "base"},
            {id: 9, name: "atrocity exhibition", display_name: "atrocity exhibition", rating: 89, position: "GK", nation: "England", stats: {dec: 88, ref: 91, pos: 90, pas: 84}, traits: ["shotstopperplus"], card_type: "base"},
            {id: 10, name: "drkuu", display_name: "drkuu", rating: 87, position: "CDM", nation: "Germany", stats: {sho: 84, pas: 87, pos: 87, def: 86}, traits: ["playmaker"], card_type: "base"},
            {id: 11, name: "zenix", display_name: "zen!x", rating: 87, position: "RW", nation: "Poland", stats: {sho: 88, pas: 85, pos: 84, def: 80}, traits: ["clinical finisherplus"], card_type: "base"},
            {id: 12, name: "Ibrahim", display_name: "Ibrahim", rating: 87, position: "CB", nation: "Egypt", stats: {sho: 85, pas: 85, pos: 88, def: 86}, traits: ["penalty specialistplus"], card_type: "base"},
            {id: 13, name: "cYn", display_name: "cYn", rating: 85, position: "CM", nation: "England", stats: {sho: 83, pas: 85, pos: 85, def: 79}, traits: ["clinical finisherplus"], card_type: "base"},
            {id: 14, name: "ToughBaby", display_name: "ToughBaby", rating: 84, position: "CM", nation: "Palestine", stats: {sho: 80, pas: 86, pos: 82, def: 82}, traits: ["penalty specialistplus"], card_type: "base"},
            {id: 15, name: "m1dnam", display_name: "m1dnam", rating: 84, position: "CM", nation: "Portugal", stats: {sho: 82, pas: 83, pos: 84, def: 79}, traits: ["clinical finisher"], card_type: "base"},
            {id: 16, name: "Razor", display_name: "Razor", rating: 84, position: "ST", nation: "Romania", stats: {sho: 84, pas: 82, pos: 82, def: 76}, traits: ["aggressiveplus"], card_type: "base"},
            {id: 17, name: "Arshavin", display_name: "Arshavin", rating: 83, position: "ST", nation: "Wales", stats: {sho: 84, pas: 80, pos: 82, def: 77}, traits: ["clinical finisher"], card_type: "base"},
            {id: 18, name: "luur", display_name: "luur", rating: 89, position: "GK", nation: "Serbia", stats: {dec: 89, pas: 86, pos: 88, ref: 90}, traits: ["shotstopperplus"], card_type: "base"},
            {id: 19, name: "A7mdBibo", display_name: "A7mdBibo", rating: 82, position: "RW", nation: "Egypt", stats: {sho: 82, pas: 83, pos: 80, def: 77}, traits: ["playmaker"], card_type: "base"},
            {id: 20, name: "Lony", display_name: "Lony", rating: 82, position: "CM", nation: "Tunisia", stats: {sho: 80, pas: 83, pos: 79, def: 78}, traits: ["playmaker"], card_type: "base"},
            {id: 21, name: "Slimani", display_name: "$limani", rating: 82, position: "CB", nation: "Portugal", stats: {sho: 78, pas: 83, pos: 84, def: 83}, traits: ["aggressive"], card_type: "base"},
            {id: 22, name: "ShadiOzz", display_name: "ShadiOzz", rating: 82, position: "ST", nation: "Egypt", stats: {sho: 84, pas: 82, pos: 82, def: 75}, traits: ["clinical finisher"], card_type: "base"},
            {id: 23, name: "Tjay", display_name: "Tjay", rating: 82, position: "CAM", nation: "England", stats: {sho: 80, pas: 82, pos: 81, def: 76}, traits: ["playmaker"], card_type: "base"},
            {id: 24, name: "Berbatov", display_name: "Berbatov", rating: 82, position: "CAM", nation: "United Kingdom", stats: {sho: 81, pas: 81, pos: 81, def: 74}, traits: ["clinical finisher"], card_type: "base"},
            {id: 25, name: "Luisdiaz", display_name: "Luisdiaz", rating: 81, position: "LW", nation: "England", stats: {sho: 82, pas: 81, pos: 80, def: 75}, traits: ["clinical finisher"], card_type: "base"},
            {id: 26, name: "Monk", display_name: "Monk", rating: 80, position: "CM", nation: "Croatia", stats: {sho: 77, pas: 82, pos: 79, def: 81}, traits: [], card_type: "base"},
            {id: 27, name: "Maks Luburic", display_name: "Maks Luburic", rating: 80, position: "LW", nation: "Niger", stats: {sho: 78, pas: 81, pos: 79, def: 79}, traits: ["aggressive"], card_type: "base"},
            {id: 28, name: "Faya lev", display_name: "Faya lev", rating: 80, position: "CM", nation: "Germany", stats: {sho: 77, pas: 81, pos: 78, def: 77}, traits: ["composed"], card_type: "base"},
            {id: 29, name: "Timber", display_name: "Timber", rating: 80, position: "CB", nation: "Netherlands", stats: {sho: 76, pas: 80, pos: 81, def: 82}, traits: [], card_type: "base"},
            {id: 30, name: "valotii", display_name: "valotii", rating: 80, position: "CAM", nation: "Italy", stats: {sho: 77, pas: 79, pos: 82, def: 80}, traits: ["aggressive"], card_type: "base"},
            {id: 31, name: "EmKo", display_name: "EmKo", rating: 79, position: "ST", nation: "Bosnia and Herzegovina", stats: {sho: 80, pas: 81, pos: 77, def: 73}, traits: [], card_type: "base"},
            {id: 32, name: "Van Nistelrooy", display_name: "Van Nistelrooy", rating: 79, position: "RW", nation: "France", stats: {sho: 79, pas: 80, pos: 79, def: 75}, traits: [], card_type: "base"},
            {id: 33, name: "Cat", display_name: "Cat", rating: 79, position: "CDM", nation: "England", stats: {sho: 75, pas: 80, pos: 80, def: 81}, traits: [], card_type: "base"},
            {id: 34, name: "blimpus", display_name: "blimpus", rating: 79, position: "CB", nation: "United Kingdom", stats: {sho: 76, pas: 79, pos: 79, def: 79}, traits: [], card_type: "base"},
            {id: 35, name: "Kepa", display_name: "Kepa", rating: 79, position: "CB", nation: "Greece", stats: {sho: 74, pas: 77, pos: 83, def: 82}, traits: [], card_type: "base"},
            {id: 36, name: "ShIeLd", display_name: "ShIeLd", rating: 85, position: "GK", nation: "Italy", stats: {dec: 85, pas: 82, pos: 86, ref: 86}, traits: ["shotstopperplus"], card_type: "base"},
            {id: 37, name: "Mbappe", display_name: "Mbappe", rating: 79, position: "ST", nation: "Spain", stats: {sho: 79, pas: 76, pos: 81, def: 72}, traits: [], card_type: "base"},
            {id: 38, name: "santi", display_name: "santi", rating: 79, position: "CB", nation: "Italy", stats: {sho: 67, pas: 74, pos: 79, def: 82}, traits: [], card_type: "base"},
            {id: 39, name: "Van Basten", display_name: "Van Basten", rating: 78, position: "ST", nation: "Niger", stats: {sho: 79, pas: 80, pos: 72, def: 71}, traits: [], card_type: "base"},
            {id: 40, name: "BRUTUS", display_name: "BRUTUS", rating: 78, position: "CB", nation: "Italy", stats: {sho: 77, pas: 80, pos: 77, def: 79}, traits: [], card_type: "base"},
            {id: 41, name: "DOOM", display_name: "DOOM", rating: 78, position: "LW", nation: "Czech Republic", stats: {sho: 78, pas: 79, pos: 78, def: 74}, traits: [], card_type: "base"},
            {id: 42, name: "YaYa", display_name: "YaYa", rating: 78, position: "CAM", nation: "Egypt", stats: {sho: 75, pas: 79, pos: 79, def: 73}, traits: [], card_type: "base"},
            {id: 43, name: "Misimaro", display_name: "Misimaro", rating: 78, position: "RW", nation: "Germany", stats: {sho: 76, pas: 78, pos: 77, def: 75}, traits: [], card_type: "base"},
            {id: 44, name: "YEET", display_name: "YEET", rating: 78, position: "LW", nation: "Cocos (Keeling) Islands", stats: {sho: 77, pas: 78, pos: 76, def: 71}, traits: [], card_type: "base"},
            {id: 45, name: "Himothy", display_name: "Himothy", rating: 77, position: "CDM", nation: "Tunisia", stats: {sho: 76, pas: 76, pos: 76, def: 69}, traits: [], card_type: "base"},
            {id: 46, name: "Spero", display_name: "Spero", rating: 76, position: "ST", nation: "North Korea", stats: {sho: 79, pas: 76, pos: 78, def: 73}, traits: [], card_type: "base"},
            {id: 47, name: "evil.pro", display_name: "evil.pro", rating: 76, position: "CDM", nation: "Spain", stats: {sho: 74, pas: 76, pos: 77, def: 73}, traits: [], card_type: "base"},
            {id: 48, name: "Dynaxz", display_name: "Dynaxz", rating: 75, position: "LW", nation: "Japan", stats: {sho: 73, pas: 77, pos: 74, def: 72}, traits: [], card_type: "base"},
            {id: 49, name: "Limpo", display_name: "Limpo", rating: 75, position: "CDM", nation: "France", stats: {sho: 73, pas: 77, pos: 78, def: 80}, traits: [], card_type: "base"},
            {id: 50, name: "MRN", display_name: "MRN", rating: 75, position: "CAM", nation: "Egypt", stats: {sho: 71, pas: 77, pos: 71, def: 77}, traits: [], card_type: "base"},
            {id: 51, name: "sergicanos", display_name: "sergicanos", rating: 74, position: "LW", nation: "Spain", stats: {sho: 75, pas: 74, pos: 73, def: 69}, traits: [], card_type: "base"},
            {id: 52, name: "McHamm", display_name: "McHamm", rating: 74, position: "CB", nation: "Ireland", stats: {sho: 68, pas: 74, pos: 74, def: 77}, traits: [], card_type: "base"},
            {id: 53, name: "Cubarsi", display_name: "Cubarsi", rating: 72, position: "CB", nation: "Spain", stats: {sho: 68, pas: 70, pos: 72, def: 74}, traits: [], card_type: "base"},
            {id: 54, name: "saygex", display_name: "saygex", rating: 70, position: "CB", nation: "Germany", stats: {sho: 68, pas: 67, pos: 70, def: 65}, traits: [], card_type: "base"},
            {id: 55, name: "Calafiori", display_name: "Calafiori", rating: 69, position: "CB", nation: "Italy", stats: {sho: 68, pas: 70, pos: 70, def: 71}, traits: [], card_type: "base"},
            {id: 56, name: "Vonstassin", display_name: "Vonstassin", rating: 69, position: "RW", nation: "France", stats: {sho: 72, pas: 69, pos: 70, def: 66}, traits: [], card_type: "base"},
            {id: 57, name: "DontThugM3", display_name: "DontThugM3", rating: 68, position: "ST", nation: "United Kingdom", stats: {sho: 72, pas: 69, pos: 67, def: 65}, traits: [], card_type: "base"},
            {id: 58, name: "dff", display_name: "dff", rating: 68, position: "CDM", nation: "United Kingdom", stats: {sho: 64, pas: 69, pos: 70, def: 69}, traits: [], card_type: "base"},
            {id: 59, name: "Tallinn", display_name: "Tallinn", rating: 68, position: "ST", nation: "Estonia", stats: {sho: 69, pas: 67, pos: 71, def: 62}, traits: [], card_type: "base"},
            {id: 60, name: "Gullit_PC", display_name: "Gullit_PC", rating: 64, position: "ST", nation: "Morocco", stats: {sho: 66, pas: 64, pos: 66, def: 53}, traits: [], card_type: "base"},
            {id: 61, name: "UrLocalFrenchGuy", display_name: "UrLocalFrenchGuy", rating: 61, position: "CAM", nation: "France", stats: {sho: 66, pas: 67, pos: 63, def: 64}, traits: [], card_type: "base"},
            {id: 62, name: "GK", display_name: "GK", rating: 81, position: "GK", nation: "Spain", stats: {dec: 79, pas: 78, pos: 81, ref: 83}, traits: ["shotstopper"], card_type: "base"},
            {id: 63, name: "Gol", display_name: "Gol", rating: 83, position: "GK", nation: "Romania", stats: {dec: 82, pas: 79, pos: 86, ref: 82}, traits: ["shotstopperplus"], card_type: "base"},
            {id: 64, name: "7ooby", display_name: "7ooby", rating: 81, position: "GK", nation: "Brazil", stats: {dec: 80, pas: 84, pos: 83, ref: 82}, traits: [], card_type: "base"},
            {id: 65, name: "Fad", display_name: "Fad", rating: 80, position: "GK", nation: "Italy", stats: {dec: 79, pas: 78, pos: 82, ref: 78}, traits: [], card_type: "base"},
            {id: 66, name: "GGGheddafi", display_name: "GGGheddafi", rating: 78, position: "GK", nation: "Italy", stats: {dec: 73, pas: 75, pos: 76, ref: 78}, traits: ["shotstopper"], card_type: "base"},
            {id: 67, name: "Foderingham", display_name: "Foderingham", rating: 73, position: "GK", nation: "England", stats: {dec: 74, pas: 72, pos: 72, ref: 75}, traits: [], card_type: "base"},
            {id: 68, name: "Austin", display_name: "Austin", rating: 67, position: "GK", nation: "England", stats: {dec: 69, pas: 65, pos: 65, ref: 66}, traits: [], card_type: "base"},
            {id: 69, name: "shit guy", display_name: "shit guy", rating: 55, position: "ST", nation: "Poland", base_value: 540, stats: {sho: 45, pas: 40, pos: 50, def: 30}, traits: [], card_type: "base"}
        ];

        // add buy/sell prices from PRICE_TABLE and generate img paths
        allPlayers.forEach(player => {
            const priceData = PRICE_TABLE[player.rating];
            if (priceData) {
                player.buy_price = priceData[0];
                player.sell_price = priceData[1];
            } else {
                player.buy_price = player.base_value || 0;
                player.sell_price = Math.floor((player.base_value || 0) * 0.67);
            }
            // generate img path from name with manual overrides for special characters
            if (!player.img) {
                const specialNames = {
                    "W-pi": "w-pi",
                    "evil.pro": "evil.pro",
                    "Cubarsí": "cubarsi",
                    "zen!x": "zenix",
                    "$limani": "slimani"
                };
                
                let imgName = specialNames[player.name] || player.name.toLowerCase().replace(/\s+/g, '_').replace(/[^a-z0-9_]/g, '');
                player.img = `cards/${imgName}.png`;
            }
        });

        const positionCategories = {
            'DEF': ['CB', 'RB', 'LB'],
            'MID': ['CDM', 'CM', 'CAM'],
            'ATT': ['RW', 'LW', 'ST']
        };

        // usernames to display names
        const usernameAliases = {
            "the1n1ly": "atrocity exhibition",
            "srolae": "alors",
            "jameth.": "Cat",
            "kurcina888": "luur",
            "his___majesty": "BRUTUS",
            "dynaxxz_": "dynaxz",
            "fabd27": "Fad",
            "faya0118": "Faya lev",
            "fussbild_3001": "saygex",
            "v4ks": "Vaks",
            "o.t.s._music": "Misimaro",
        };

        function mapUsername(name) {
            return usernameAliases[name] || name || "Unknown";
        }

        let filteredPlayers = [...allPlayers];

        function displayPlayers(playersToDisplay) {
            const container = document.getElementById('players-container');
            container.innerHTML = '';

            if (playersToDisplay.length === 0) {
                container.innerHTML = '<p style="text-align:center;grid-column:1/-1;color:#a0a0a0;">No players found matching your filters.</p>';
                return;
            }

            playersToDisplay.forEach(player => {
                const card = document.createElement('div');
                card.className = 'player-card';
                card.innerHTML = `
                    <img src="${player.img}" alt="${player.name}" class="player-image">
                    <div class="player-header">
                        <h3 class="player-name">${player.name}</h3>
                    </div>
                    <div class="player-details">
                        <div class="player-detail">
                            <span class="detail-label">Position:</span>
                            <span class="player-position">${player.position}</span>
                        </div>
                        <div class="player-detail">
                            <span class="detail-label">Nation:</span>
                            <span class="player-nation">${player.nation}</span>
                        </div>
                        <div class="player-detail">
                            <span class="detail-label">Buy Price:</span>
                            <span>${player.buy_price.toLocaleString()} coins</span>
                        </div>
                        <div class="player-detail">
                            <span class="detail-label">Sell Price:</span>
                            <span>${player.sell_price.toLocaleString()} coins</span>
                        </div>
                    </div>
                    <p style="margin-top:15px;text-align:center;font-size:12px;color:#a0a0a0;">
                        Use <code>/buyplayer ${player.name}</code> in Discord
                    </p>
                `;
                container.appendChild(card);
            });
        }

        function filterAndSortPlayers() {
            const sortValue = document.getElementById('sort-select').value;
            const positionFilter = document.getElementById('position-filter').value;
            const ratingFilter = document.getElementById('rating-filter').value;
            const traitFilter = document.getElementById('trait-filter').value;
            const searchTerm = document.getElementById('search-box').value.toLowerCase();
            
            const minPrice = document.getElementById('min-price').value ? parseInt(document.getElementById('min-price').value) : 0;
            const maxPrice = document.getElementById('max-price').value ? parseInt(document.getElementById('max-price').value) : Number.MAX_SAFE_INTEGER;
            const minOvr = document.getElementById('min-ovr').value ? parseInt(document.getElementById('min-ovr').value) : 0;
            const maxOvr = document.getElementById('max-ovr').value ? parseInt(document.getElementById('max-ovr').value) : 99;

            filteredPlayers = allPlayers.filter(player => {
                let matchesPosition = true;
                if(positionFilter !== 'all'){
                    if(['DEF','MID','ATT'].includes(positionFilter)){
                        matchesPosition = positionCategories[positionFilter].includes(player.position);
                    } else {
                        matchesPosition = player.position === positionFilter;
                    }
                }

                const matchesSearch = searchTerm === '' ||
                    player.name.toLowerCase().includes(searchTerm) ||
                    player.nation.toLowerCase().includes(searchTerm);

                let matchesRating = true;
                if(ratingFilter !== 'all'){
                    if(ratingFilter === '90+'){
                        matchesRating = player.rating >= 90;
                    } else {
                        const [min,max] = ratingFilter.split('-').map(Number);
                        matchesRating = player.rating >= min && player.rating <= max;
                    }
                }
                                
                let matchesTrait = true;
                if(traitFilter !== 'all'){
                    matchesTrait = player.traits && player.traits.some(trait => trait.toLowerCase() === traitFilter.toLowerCase());
                }
                
                const matchesPriceRange = player.buy_price >= minPrice && player.buy_price <= maxPrice;
                const matchesOvrRange = player.rating >= minOvr && player.rating <= maxOvr;

                return matchesPosition && matchesSearch && matchesRating && matchesTrait && matchesPriceRange && matchesOvrRange;
            });

            switch(sortValue){
                case'rating-desc': filteredPlayers.sort((a,b)=>b.rating-a.rating); break;
                case'rating-asc': filteredPlayers.sort((a,b)=>a.rating-b.rating); break;
                case'name-asc': filteredPlayers.sort((a,b)=>a.name.localeCompare(b.name)); break;
                case'name-desc': filteredPlayers.sort((a,b)=>b.name.localeCompare(a.name)); break;
                case'price-desc': filteredPlayers.sort((a,b)=>b.buy_price-a.buy_price); break;
                case'price-asc': filteredPlayers.sort((a,b)=>a.buy_price-b.buy_price); break;
            }

            displayPlayers(filteredPlayers);
        }

        // event listeners for filters
        document.getElementById('sort-select').addEventListener('change', filterAndSortPlayers);
        document.getElementById('position-filter').addEventListener('change', filterAndSortPlayers);
        document.getElementById('rating-filter').addEventListener('change', filterAndSortPlayers);
        document.getElementById('trait-filter').addEventListener('change', filterAndSortPlayers);
        document.getElementById('search-box').addEventListener('input', filterAndSortPlayers);
        document.getElementById('min-price').addEventListener('input', filterAndSortPlayers);
        document.getElementById('max-price').addEventListener('input', filterAndSortPlayers);
        document.getElementById('min-ovr').addEventListener('input', filterAndSortPlayers);
        document.getElementById('max-ovr').addEventListener('input', filterAndSortPlayers);

        filterAndSortPlayers();

        function renderLeaderboardTable(rows) {
            if(!rows || rows.length === 0) {
                return '<p style="text-align:center;color:#a0a0a0;">No data available</p>';
            }
            let html = '<div style="background:var(--card-bg);padding:20px;border-radius:12px;overflow-x:auto;font-family:monospace;white-space:pre;">';
            html += 'Pos | User           | Team                          | P  | W  | D  | L  | GF | GA | GD  | Pts\n';
            html += '-'.repeat(95) + '\n';
            rows.forEach((team, idx) => {
                const pos = String(idx + 1).padStart(2, ' ');
                const userName = team.user || 'Unknown';
                const userPadded = userName.substring(0, 14).padEnd(14, ' ');
                const color = team.color || '';
                const teamName = (team.team_name || 'N/A').substring(0, 30).padEnd(30, ' ');
                const played = String(team.played || 0).padStart(2, ' ');
                const wins = String(team.wins || 0).padStart(2, ' ');
                const draws = String(team.draws || 0).padStart(2, ' ');
                const losses = String(team.losses || 0).padStart(2, ' ');
                const gf = String(team.gf || 0).padStart(2, ' ');
                const ga = String(team.ga || 0).padStart(2, ' ');
                const gd = String(team.gd || 0).padStart(3, ' ');
                const points = String(team.points || 0).padStart(3, ' ');
                
                const userDisplay = color ? `<span style="color:${color}">${userPadded}</span>` : userPadded;
                html += `${pos}  | ${userDisplay} | ${teamName} | ${played} | ${wins} | ${draws} | ${losses} | ${gf} | ${ga} | ${gd} | ${points}\n`;
            });
            html += '</div>';
            return html;
        }

        async function loadPlayerStats() {
            const container = document.getElementById('player-stats-container');
            container.innerHTML = '<p style="text-align:center;color:#a0a0a0;">Loading...</p>';
            try {
                const data = await fetch('./leaderboards/player_stats.json').then(r => r.json());
                
                // stat cat tabs
                let html = '<div style="margin-bottom:20px;">';
                html += '<div style="display:flex;flex-wrap:wrap;gap:8px;justify-content:center;">';
                const categories = [
                    { key: 'topGoalScorers', label: '🔥 Top Goal Scorers' },
                    { key: 'topAssists', label: '🎯 Top Assists' },
                    { key: 'mostAppearances', label: '👥 Most Appearances' },
                    { key: 'mostMotms', label: '⭐ Most MOTMs' }
                ];
                
                categories.forEach((cat, idx) => {
                    html += `<button onclick="showPlayerStatCategory('${cat.key}')" style="padding:8px 12px;background:var(--primary);border:none;border-radius:6px;color:white;cursor:pointer;font-size:12px;">${cat.label}</button>`;
                });
                html += '</div></div>';
                
                // cat switching data store
                window.playerStatsData = data;
                window.playerStatsCategories = categories;
                
                // first cat default
                html += `<div id="stat-category-display"></div>`;
                container.innerHTML = html;
                
                // first category dispkay
                showPlayerStatCategory('topGoalScorers');
            } catch (e) {
                container.innerHTML = `<p style="color:red;">Error loading player stats: ${e.message}</p>`;
            }
        }

        function showPlayerStatCategory(category) {
            const data = window.playerStatsData[category] || [];
            const display = document.getElementById('stat-category-display');
            
            if(!data || data.length === 0) {
                display.innerHTML = '<p style="text-align:center;color:#a0a0a0;">No data available</p>';
                return;
            }
            
            let html = '<div style="max-width:900px;margin:0 auto;">';
            data.slice(0, 20).forEach((item, idx) => {
                let stat;
                if (item.stat !== undefined) {
                    const decimals = item.decimals !== undefined ? item.decimals : 2;
                    stat = typeof item.stat === 'number' ? item.stat.toFixed(decimals) : item.stat;
                } else {
                    stat = item.value;
                }
                const unit = item.unit || '';
                html += `
                    <div style="background:var(--card-bg);padding:12px;margin-bottom:10px;border-radius:8px;display:flex;justify-content:space-between;align-items:center;border-left:4px solid var(--primary);">
                        <div style="flex:1;">
                            <span style="color:var(--primary);font-weight:bold;margin-right:8px;">#${idx + 1}</span>
                            <span style="font-weight:bold;">${item.playerName}</span>
                            <span style="color:#a0a0a0;font-size:12px;margin-left:10px;">(${item.teamName})</span>
                        </div>
                        <div style="font-weight:bold;color:var(--primary);font-size:16px;">${stat} ${unit}</div>
                    </div>
                `;
            });
            html += '</div>';
            display.innerHTML = html;
        }

        async function loadUserStats() {
            const container = document.getElementById('user-stats-container');
            container.innerHTML = '<p style="text-align:center;color:#a0a0a0;">Loading...</p>';
            try {
                const data = await fetch('./leaderboards/user_stats.json?v=' + Date.now()).then(r => r.json());
                
                // stat cat tabs
                let html = '<div style="margin-bottom:20px;">';
                html += '<div style="display:flex;flex-wrap:wrap;gap:8px;justify-content:center;">';
                const categories = [
                    { key: 'richestUsers', label: '💰 Richest Users' },
                    { key: 'biggestCollection', label: '🎴 Biggest Collection' },
                    { key: 'mostValuableTeam', label: '💎 Most Valuable Team' },
                    { key: 'highestAvgRating', label: '⭐ Highest Avg Rating' },
                    { key: 'teamGoalsScored', label: '⚽ Team Goals Scored' },
                    { key: 'highestWinrate', label: '🏆 Highest Winrate (min 10)' }
                ];
                
                categories.forEach((cat, idx) => {
                    html += `<button onclick="showUserStatCategory('${cat.key}')" style="padding:8px 12px;background:var(--primary);border:none;border-radius:6px;color:white;cursor:pointer;font-size:12px;">${cat.label}</button>`;
                });
                html += '</div></div>';
                
                // cat switching data store
                window.userStatsData = data;
                window.userStatsCategories = categories;
                
                // first cat default
                html += `<div id="user-stat-category-display"></div>`;
                container.innerHTML = html;
                
                // first cat dis
                showUserStatCategory('richestUsers');
            } catch (e) {
                container.innerHTML = `<p style="color:red;">Error loading user stats: ${e.message}</p>`;
            }
        }

        function showUserStatCategory(category) {
            console.log(`📊 Showing category: ${category}`);
            const data = window.userStatsData[category] || [];
            console.log(`📊 Category data:`, data);
            const display = document.getElementById('user-stat-category-display');
            
            if(!data || data.length === 0) {
                display.innerHTML = '<p style="text-align:center;color:#a0a0a0;">No data available</p>';
                return;
            }
            
            let html = '<div style="max-width:900px;margin:0 auto;">';
            data.slice(0, 20).forEach((item, idx) => {
                const stat = item.stat !== undefined ? (typeof item.stat === 'number' && item.stat % 1 !== 0 ? item.stat.toFixed(2) : item.stat) : item.value;
                const unit = item.unit || '';
                const color1 = item.color || '';
                const color2 = item.color2 || color1;  // if no second color, use first color

                const rawUsername = item.username || item.teamName;
                const displayUsername = mapUsername(rawUsername);
                
                // DEBUG
                if (color1) {
                    console.log(`[${rawUsername}] Colors found: ${color1} / ${color2}`);
                }
                
                // grad style CREATION
                let usernameStyle = 'font-weight:bold;';
                let usernameClass = '';
                
                if (color1 && color1.startsWith('#') && color1.length === 7) {
                    try {
                        // parse rbg from hex
                        const r1 = parseInt(color1.slice(1, 3), 16) || 0;
                        const g1 = parseInt(color1.slice(3, 5), 16) || 0;
                        const b1 = parseInt(color1.slice(5, 7), 16) || 0;
                        
                        const color2Valid = (color2 && color2.startsWith('#') && color2.length === 7) ? color2 : color1;
                        const r2 = parseInt(color2Valid.slice(1, 3), 16) || 0;
                        const g2 = parseInt(color2Valid.slice(3, 5), 16) || 0;
                        const b2 = parseInt(color2Valid.slice(5, 7), 16) || 0;
                        
                        // validate rgb
                        if (isNaN(r1) || isNaN(g1) || isNaN(b1) || isNaN(r2) || isNaN(g2) || isNaN(b2)) {
                            throw new Error("Invalid RGB values");
                        }
                        
                        // glow avg
                        const glowR = Math.round((r1 + r2) / 2);
                        const glowG = Math.round((g1 + g2) / 2);
                        const glowB = Math.round((b1 + b2) / 2);
                        
                        usernameStyle = `
                            font-weight:bold;
                            background: linear-gradient(90deg, ${color1}, ${color2Valid});
                            -webkit-background-clip: text;
                            -webkit-text-fill-color: transparent;
                            background-clip: text;
                            background-size: 400% 400%;
                            animation: usernameGradientMove 7s ease infinite;
                            filter: drop-shadow(0 0 8px rgba(${glowR}, ${glowG}, ${glowB}, 0.6)) 
                                    drop-shadow(0 0 4px rgba(${glowR}, ${glowG}, ${glowB}, 0.4));
                        `;
                    } catch (e) {
                        console.warn(`Invalid color format for user ${rawUsername}: ${color1}, ${color2}`, e);
                        usernameStyle = `font-weight:bold;color:var(--primary);`;
                    }
                }
                
                html += `
                    <div style="background:var(--card-bg);padding:12px;margin-bottom:10px;border-radius:8px;display:flex;justify-content:space-between;align-items:center;border-left:4px solid var(--primary);">
                        <div style="flex:1;">
                            <span style="color:var(--primary);font-weight:bold;margin-right:8px;">#${idx + 1}</span>
                            <span style="${usernameStyle}">${displayUsername}</span>
                            <span style="color:#a0a0a0;font-size:12px;margin-left:10px;">${item.teamName ? '(' + item.teamName + ')' : ''}</span>
                        </div>
                        <div style="font-weight:bold;color:var(--primary);font-size:16px;">${stat} ${unit}</div>
                    </div>
                `;
            });
            html += '</div>';
            display.innerHTML = html;
        }

        async function loadAllLeagueStandings() {
            const container = document.getElementById('league-standings-container');
            container.innerHTML = '<p style="text-align:center;color:#a0a0a0;">Loading all leagues...</p>';
            try {
                // league ids detec
                const leagueIds = [];
                for (let i = 1; i <= 50; i++) {
                    try {
                        const response = await fetch(`./leaderboards/league_${i}.json`);
                        if (response.ok) {
                            leagueIds.push(i);
                        }
                    } catch (e) {
                        // continue
                    }
                }
                
                if (leagueIds.length === 0) {
                    container.innerHTML = '<p style="text-align:center;color:#a0a0a0;">No league standings available yet.</p>';
                    return;
                }
                
                let html = '';
                for (const leagueId of leagueIds) {
                    try {
                        const data = await fetch(`./leaderboards/league_${leagueId}.json`).then(r => r.json());
                        const viewDetailsLink = `<a href="leagues/league.html?id=${leagueId}" style="margin-left:15px;color:#5865f2;text-decoration:none;font-weight:bold;">View Full Details →</a>`;
                        html += `<div style="margin-bottom:30px;"><h3 style="margin:0 0 15px;color:var(--primary);font-size:18px;display:flex;align-items:center;justify-content:space-between;"><div>League ${leagueId}</div><div style="font-size:0.7em;margin-right:10px;">${viewDetailsLink}</div></h3>${renderLeaderboardTable(data.standings || data)}</div>`;
                    } catch (e) {
                        // skip unreadable league
                    }
                }
                
                if (html === '') {
                    container.innerHTML = '<p style="text-align:center;color:#a0a0a0;">No league data available.</p>';
                } else {
                    container.innerHTML = html;
                }
            } catch (e) {
                container.innerHTML = `<p style="color:red;">Error loading leagues: ${e.message}</p>`;
            }
        }

        document.getElementById('load-player-stats-btn').addEventListener('click', loadPlayerStats);
        document.getElementById('load-user-stats-btn').addEventListener('click', loadUserStats);
        document.getElementById('load-all-leagues-btn').addEventListener('click', loadAllLeagueStandings);

        let playerStatsLoaded = false;
        let userStatsLoaded = false;
        let leaguesLoaded = false;

        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                tab.classList.add('active');
                const tabName = tab.getAttribute('data-tab');
                document.getElementById(`${tabName}-tab`).classList.add('active');
                if(tabName === 'player-stats' && !playerStatsLoaded) {
                    playerStatsLoaded = true;
                    loadPlayerStats();
                }
                if(tabName === 'user-stats' && !userStatsLoaded) {
                    userStatsLoaded = true;
                    loadUserStats();
                }
                if(tabName === 'league-standings' && !leaguesLoaded) {
                    leaguesLoaded = true;
                    loadAllLeagueStandings();
                }
            });
        });
    </script>
</body>
</html>
